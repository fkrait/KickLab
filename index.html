<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KickLab</title>
  <link rel="manifest" href="manifest.json"/>
  <link rel="icon" href="icon-512.png"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    html, body {
      margin: 0; padding: 0;
      font-family: 'Inter', sans-serif;
      height: 100%;
      background: url('attached_assets/gradient_background.PNG') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }
    body {
      min-height: 100vh;
      animation: fadein 1s;
    }
    @keyframes fadein { from { opacity: 0; } to { opacity: 1; } }
    @keyframes fadeup { from { transform: translateY(20px); opacity: 0; }
                       to { transform: translateY(0); opacity: 1; } }

    /* Loader animation */
    #loaderOverlay {
      position: fixed; top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: black;
      display: flex; align-items: center; justify-content: center;
      z-index: 2000;
    }
    .spinner {
      border: 8px solid #fff3;
      border-top: 8px solid orange;
      border-radius: 50%;
      width: 80px; height: 80px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .fade-in-title {
      font-size: 1.6rem;
      font-weight: 600;
      line-height: 1.6;
      margin-bottom: 2rem;
      opacity: 0;
      animation: fadeup 1.2s ease-out 0.8s forwards;
    }
    .page-container {
      margin: 7vh auto;
      background: rgba(0,0,0,0.6);
      border-radius: 20px;
      padding: 2.5rem 2rem;
      max-width: 420px;
      box-shadow: 0 8px 32px rgba(31,38,135,0.37);
      backdrop-filter: blur(7px);
      text-align: center;
    }
    #startPage {
      margin-top: 35vh;
      opacity: 0;
      animation: fadein 0.6s forwards;
      animation-delay: 1.5s;
    }
    .button-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
      max-width: 400px;
      margin: 1.5rem auto;
    }
    .button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.6rem;
      background: linear-gradient(90deg, #ff8008, #ffc837 70%);
      color: #222;
      border: none;
      border-radius: 30px;
      padding: 1rem 1.6rem;
      font-size: 1.1rem;
      font-weight: bold;
      transition: transform .12s, box-shadow .22s, background .2s;
      cursor: pointer;
      box-shadow: 0 4px 16px rgba(0,0,0,0.18);
      width: 100%;
      outline: none;
    }
    .button:hover {
      transform: scale(1.03);
      background: linear-gradient(90deg, #ffc837, #ff8008 70%);
      box-shadow: 0 0 24px #ff8008a0;
    }
    .button:active {
      transform: scale(0.98);
      background: linear-gradient(90deg, #ff8008, #ffc837 70%);
      box-shadow: 0 0 18px #ff8008a0;
    }
    .button .icon { font-size: 1.3rem; line-height: 1; }
    input[type='number'] {
      width: 60%;
      padding: 0.5rem;
      border-radius: 8px;
      border: none;
      margin-bottom: 1rem;
      text-align: center;
      font-size: 1rem;
    }
    @media (max-width: 600px) {
      .page-container { max-width: 95vw; padding: 1rem; }
      .button-group { max-width: 95vw; }
    }
  </style>
</head>
<body>

  <!-- üîÑ Loading animation -->
  <div id="loaderOverlay">
    <div class="spinner"></div>
  </div>

  <!-- üî• Start page -->
  <div id="startPage" class="page-container">
    <p class="subtitle fade-in-title">Tr√§na din reaktionsf√∂rm√•ga och teknik med stil</p>
    <div class="button-group">
      <button class="button" onclick="showTestPage()"><span class="icon">‚ö°</span> Reaktionstest</button>
      <button class="button" onclick="showKickCounterPage()"><span class="icon">ü¶µ</span> Sparkr√§knare</button>
      <button class="button" onclick="showSparringPage()"><span class="icon">ü•ã</span> Sparring tr√§ning</button>
      <button class="button" onclick="showCompetitionSetupPage()"><span class="icon">üèÜ</span> T√§vlingsl√§ge</button>
    </div>
  </div>

  <!-- üîä Klickljud -->
  <audio id="clickSound" src="https://www.soundjay.com/button/sounds/button-16.mp3" preload="auto"></audio>

  <!-- üß† JS -->
  <script src="main.js"></script>
  <script>
    // Klickljud
    document.addEventListener('DOMContentLoaded', () => {
      const clickSound = document.getElementById('clickSound');
      document.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          clickSound.currentTime = 0;
          clickSound.play().catch(() => {});
        });
      });
    });

    // Loader: D√∂lj efter 2 sekunder
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loaderOverlay').style.display = 'none';
      }, 2000);

       });

  // Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('serviceWorker.js')
      .then(reg => console.log('ServiceWorker registrerad:', reg))
      .catch(err => console.error('ServiceWorker fel:', err));
  }
</script>

  <!-- Reaction test page -->
  <div id="testPage" class="page-container" style="display:none;">
    <h2>Reaktionstest</h2>
    <p id="command"></p><p id="status"></p><p id="result"></p>
    <div id="history"></div><div id="highscore"></div>
    <div class="button-group">
      <button class="button" onclick="startTest()">Starta test</button>
      <button class="button" onclick="stopTest()">Stoppa test</button>
      <button class="button" onclick="resetStats()">Nollst√§ll statistik</button>
      <button class="button" onclick="showStartPage()">Tillbaka</button>
    </div>
  </div>

  <!-- Kick Counter page -->
  <div id="kickCounterPage" class="page-container" style="display:none;">
    <h2>Sparkr√§knare</h2>
    <label for="testDuration">Varaktighet (sek):</label><br/>
    <input id="testDuration" type="number" value="15" min="1" onchange="updateTestDuration()"/>
    <p id="kickCount">0 sparkar</p><p id="kickTimer">15 sekunder</p>
    <p id="kickStatus">Klicka 'Starta test' f√∂r att b√∂rja</p>
    <div id="kickHistory"></div><div id="kickHighscore"></div>
    <div class="button-group">
      <button class="button" onclick="startKickTest()">Starta test</button>
      <button class="button" onclick="stopKickTest()">Stoppa test</button>
      <button class="button" onclick="resetKickStats()">Nollst√§ll statistik</button>
      <button class="button" onclick="showStartPage()">Tillbaka</button>
    </div>
  </div>

  <!-- Sparring page -->
  <div id="sparringPage" class="page-container" style="display:none;">
    <h2>Sparring tr√§ning</h2>
    <label for="sparringDuration">Varaktighet (sek):</label><br/>
    <input id="sparringDuration" type="number" value="60" min="5"/>
    <p id="sparringStatus">Klicka 'Starta' f√∂r att b√∂rja</p>
    <p id="sparringCommand"></p>
    <div class="button-group">
      <button class="button" onclick="startSparringTraining()">Starta</button>
      <button class="button" onclick="stopSparringTraining()">Stoppa</button>
      <button class="button" onclick="showStartPage()">Tillbaka</button>
    </div>
  </div>

  <!-- Competition setup -->
  <div id="competitionSetupPage" class="page-container" style="display:none;">
    <h2>T√§vlingsl√§ge ‚Äì inst√§llningar</h2>
    <p>St√§ll in antal deltagare och deras namn.</p>
    <label for="competitionCount">Antal deltagare:</label><br/>
    <input id="competitionCount" type="number" min="1" value="2" onchange="updateCompetitionNameInputs()"/>
    <div id="competitionNames" style="margin-top:1rem;"></div>
    <div class="button-group">
      <button class="button" onclick="confirmCompetitionParticipants()">N√§sta</button>
      <button class="button" onclick="showStartPage()">Tillbaka</button>
    </div>
  </div>

  <!-- Competition run -->
  <div id="competitionRunPage" class="page-container" style="display:none;">
    <h2>T√§vlingsl√§ge</h2>
    <ul id="competitionNamesList" style="list-style:none; padding-left:0; margin-bottom:1rem;"></ul>
    <div class="button-group">
      <button class="button" onclick="startCompetition()">Starta t√§vlingen</button>
      <button class="button" onclick="showCompetitionSetupPage()">Tillbaka</button>
    </div>
    <p id="competitionStatus"></p>
    <div id="competitionResults"></div>
  </div>

  <!-- Competition round -->
  <div id="competitionRoundPage" class="page-container" style="display:none;">
    <h2 id="roundParticipantName" style="font-size:2rem; margin-bottom:2rem;"></h2>
    <div class="button-group">
      <button class="button" style="font-size:1.5rem; padding:1.2rem 2rem;" onclick="beginCompetitionRound()">Starta</button>
      <button class="button" onclick="showCompetitionRunPage()">Tillbaka</button>
    </div>
  </div>

  <!-- Countdown overlay -->
  <div id="countdownOverlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;align-items:center;justify-content:center;z-index:1000;background:black;color:orange;font-size:8rem;font-weight:bold;"></div>

  <!-- Klickljud -->
  <audio id="clickSound" src="https://www.soundjay.com/button/sounds/button-16.mp3" preload="auto"></audio>

  <!-- Cheering sound -->
  <audio id="cheerSound" src="https://www.soundjay.com/human/applause-01.mp3"></audio>

  <script src="main.js"></script>
<script>
  // Klickljud
  document.addEventListener('DOMContentLoaded', () => {
    const clickSound = document.getElementById('clickSound');
    document.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        clickSound.currentTime = 0;
        clickSound.play().catch(() => {});
      });
    });
  });

  // Loader: D√∂lj efter 2 sekunder
  window.addEventListener('load', () => {
    setTimeout(() => {
      document.getElementById('loaderOverlay').style.display = 'none';
    }, 2000);
  });

  // Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('serviceWorker.js')
      .then(reg => console.log('ServiceWorker registrerad:', reg))
      .catch(err => console.error('ServiceWorker fel:', err));
  }
</script>

</body>
</html>

